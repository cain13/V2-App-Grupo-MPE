<!--   <app-header></app-header>
 -->

 <ion-header>
  <ion-toolbar color="primary">
   <ion-buttons slot="start">
     <ion-back-button></ion-back-button>
   </ion-buttons>
     <ion-title style="margin-top: 1mm; margin-bottom: 0mm;">
         <ion-text color="light">
           Historial de Documentos
         </ion-text>
     </ion-title>
   </ion-toolbar>  
   <ion-toolbar color="dark">
       <ion-searchbar style="margin-top: 3mm; margin-bottom: 0mm;" [(ngModel)]="searchKey" (ionInput)="onInput($event)" (ionCancel)="onCancel($event)" placeholder="Buscar Certificado"></ion-searchbar>
       <ion-buttons slot="end" style="margin-top: 3mm;"> 
         <ion-button size="small" shape="round" color="medium" (click)="searchFilter()">
           <ion-icon name="options"></ion-icon>
         </ion-button>
       </ion-buttons>
   </ion-toolbar>
 
   <ion-list-header *ngIf="hayConsultor" (click)="seleccionarEmpresa()">
     <ion-label color="primary"  >
       <h2>Cambiar de empresa</h2>
       <small color="primary">{{empresaCoonsultor.NombreCliente}}</small>
     </ion-label>
     <ion-icon color="primary" style="padding-right: 10px !important;" name="chevron-down-outline"></ion-icon>
   </ion-list-header>
 
 </ion-header>

<ion-content>

<!--   <ion-toolbar color="dark" mode="md">
    <ion-searchbar mode="md" style="margin-top: 3mm; margin-bottom: 0mm;" [(ngModel)]="searchKey" (ionInput)="onInput($event)" (ionCancel)="onCancel($event)" placeholder="Buscar..."></ion-searchbar>
    <ion-buttons mode="md" slot="end" style="margin-top: 2mm;"> 
      <ion-button mode="md" size="small" shape="round" color="medium" (click)="searchFilter()">
        <ion-icon mode="md" name="options"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar *ngIf="hayConsultor" mode="md">
    <ion-list-header mode="md" *ngIf="hayConsultor" (click)="seleccionarEmpresa()">
      <ion-label mode="md" color="primary">
        <h2 mode="md">Cambiar de empresa</h2>
        <small mode="md" color="primary">{{empresaCoonsultor.NombreCliente}}</small>
      </ion-label>
      <ion-icon mode="md" color="primary" style="padding-right: 10px !important;" name="chevron-down-outline"></ion-icon>
    </ion-list-header>
  </ion-toolbar> -->
  <!-- <ion-list class="ion-no-padding" [@staggerIn]="listaDocumentos">
    <ion-item class="bg-white"  *ngFor="let certificado of listaDocumentos"  tappable (click)="downloadDocumento(certificado.IdDocumento)">
      <ion-icon slot="start" name="document-outline" color="danger"></ion-icon>
      <ion-label>
        <h2> 
          <ion-text color="dark"><strong>{{certificado.TipoDocumento}}</strong></ion-text>
        </h2>
        <p class="text-12x">
          <ion-text color="secondary">{{certificado.Referencia}}</ion-text>
        </p>
        <p class="text-12x">
          <ion-text color="secondary">{{certificado.FechaNotificacion | date: 'dd/MM/yyyy'}}</ion-text>
        </p>
      </ion-label>
      <ion-icon slot="end" name="download-outline"></ion-icon>
    </ion-item>
  </ion-list> -->
  
  <ion-row *ngIf="listaCertAptitud === null || listaCertAptitud === undefined || listaCertAptitud.length < 1" style="background: #FFE294!important; padding:10px !important;">
    <ion-col>
      <label> No hay documentos.</label>        
      </ion-col>
  </ion-row>
  
  <ion-list *ngIf="listaCertAptitud.length !== 0" class="ion-no-padding" [@staggerIn]="listaDocumentos">
    <ion-list-header color="dark" mode="md">
      <ion-text color="light" style="font-size: large;">Certificados Aptitud</ion-text>
    </ion-list-header>
    <ion-item class="bg-white"  *ngFor="let certificado of listaCertAptitud"  tappable (click)="downloadDocumento(certificado.IdDocumento)">
      <ion-icon slot="start" name="document-outline" color="danger"></ion-icon>
      <ion-label>
        <h2> 
          <ion-text color="dark"><strong>{{certificado.TipoDocumento}}</strong></ion-text>
        </h2>
        <p class="text-12x">
          <ion-text color="secondary">{{certificado.Referencia}}</ion-text>
        </p>
        <p class="text-12x">
          <ion-text color="secondary">{{certificado.FechaNotificacion | date: 'dd/MM/yyyy'}}</ion-text>
        </p>
      </ion-label>
      <ion-icon slot="end" name="download-outline"></ion-icon>
    </ion-item>
  </ion-list>

  <ion-list *ngIf="listaMemoriaAnual.length !== 0" class="ion-no-padding" [@staggerIn]="listaDocumentos">
    <ion-list-header mode="md">Memoria Anual</ion-list-header>
    <ion-item class="bg-white"  *ngFor="let memAnual of listaMemoriaAnual"  tappable (click)="downloadDocumento(memAnual.IdDocumento)">
      <ion-icon slot="start" name="document-outline" color="danger"></ion-icon>
      <ion-label>
        <h2> 
          <ion-text color="dark"><strong>{{memAnual.TipoDocumento}}</strong></ion-text>
        </h2>
        <p class="text-12x">
          <ion-text color="secondary">{{memAnual.Referencia}}</ion-text>
        </p>
        <p class="text-12x">
          <ion-text color="secondary">{{memAnual.FechaNotificacion | date: 'dd/MM/yyyy'}}</ion-text>
        </p>
      </ion-label>
      <ion-icon slot="end" name="download-outline"></ion-icon>
    </ion-item>
  </ion-list>

  <ion-list *ngIf="listaPlanificacion.length !== 0" class="ion-no-padding" [@staggerIn]="listaDocumentos">
    <ion-list-header mode="md">Planificación VS</ion-list-header>
    <ion-item class="bg-white"  *ngFor="let plan of listaPlanificacion"  tappable (click)="downloadDocumento(plan.IdDocumento)">
      <ion-icon slot="start" name="document-outline" color="danger"></ion-icon>
      <ion-label>
        <h2> 
          <ion-text color="dark"><strong>{{plan.TipoDocumento}}</strong></ion-text>
        </h2>
        <p class="text-12x">
          <ion-text color="secondary">{{plan.Referencia}}</ion-text>
        </p>
        <p class="text-12x">
          <ion-text color="secondary">{{plan.FechaNotificacion | date: 'dd/MM/yyyy'}}</ion-text>
        </p>
      </ion-label>
      <ion-icon slot="end" name="download-outline"></ion-icon>
    </ion-item>
  </ion-list>

  <ion-list *ngIf="listaEstudioEpi.length !== 0" class="ion-no-padding" [@staggerIn]="listaDocumentos">
    <ion-list-header mode="md">Estudio Epidemiológico</ion-list-header>
    <ion-item class="bg-white"  *ngFor="let estudio of listaEstudioEpi"  tappable (click)="downloadDocumento(estudio.IdDocumento)">
      <ion-icon slot="start" name="document-outline" color="danger"></ion-icon>
      <ion-label>
        <h2> 
          <ion-text color="dark"><strong>{{estudio.TipoDocumento}}</strong></ion-text>
        </h2>
        <p class="text-12x">
          <ion-text color="secondary">{{estudio.Referencia}}</ion-text>
        </p>
        <p class="text-12x">
          <ion-text color="secondary">{{estudio.FechaNotificacion | date: 'dd/MM/yyyy'}}</ion-text>
        </p>
      </ion-label>
      <ion-icon slot="end" name="download-outline"></ion-icon>
    </ion-item>
  </ion-list>
  
  <ion-infinite-scroll threshold="100px" (ionInfinite)="getHistorialDocumentos($event)">
    
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Cargando documentos..">    
    </ion-infinite-scroll-content>
  
  </ion-infinite-scroll>
</ion-content>
